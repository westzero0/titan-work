<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="https://github.com/westzero0/titan-work/blob/main/192.png?raw=true">

    <title>íƒ€ì´íƒ„ ì¼ë³´ v3.5</title>
    <style>
        :root { --primary: #2563eb; --bg: #f8fafc; --text: #1e293b; --chip-bg: #f1f5f9; }
        body {
        font-family: -apple-system, sans-serif; 
        background: var(--bg); 
        color: var(--text); 
        margin: 0; 
        padding: 0; 
        /* ë‚´ë¹„ë°”ì— ë²„íŠ¼ì´ ê°€ë ¤ì§€ì§€ ì•Šë„ë¡ ì•„ë˜ìª½ ê³µê°„ í™•ë³´ */
        padding-bottom: 100px;
        }
        .container { max-width: 500px; margin: auto; padding: 15px; }
        .card { background: white; border-radius: 16px; padding: 16px; margin-bottom: 16px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border: 1px solid #f1f5f9; }
        label { display: block; margin-bottom: 8px; font-weight: bold; font-size: 0.9rem; color: #475569; }
        input, select, textarea { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #cbd5e1; font-size: 1rem; box-sizing: border-box; margin-bottom: 10px; }
        
        /* ë ˆì´ì•„ì›ƒ ìˆ˜ì • */
        .site-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .checkbox-group { display: flex; align-items: center; font-size: 0.8rem; gap: 5px; cursor: pointer; color: #64748b; }
        .checkbox-group input { width: auto; margin: 0; }

        .chip-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; gap: 10px; }
        .chip-input-group { display: flex; flex: 1; gap: 5px; }
        .chip-input-group input { margin-bottom: 0; flex: 1; padding: 8px; font-size: 0.9rem; }
        .add-btn { background: #334155; color: white; border: none; padding: 8px 12px; border-radius: 8px; font-size: 0.8rem; white-space: nowrap; cursor: pointer; }
        .del-mode-btn { color: #ef4444; font-size: 0.8rem; cursor: pointer; white-space: nowrap; font-weight: bold; }
        
        .chip-container { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; min-height: 20px; }
        .chip { padding: 8px 14px; background: var(--chip-bg); border-radius: 20px; font-size: 0.9rem; cursor: pointer; border: 1px solid #e2e8f0; transition: 0.2s; }
        .chip.active { background: var(--primary); color: white; border-color: var(--primary); }
        .chip.delete-target { background: #fee2e2; color: #ef4444; border: 1px dashed #ef4444; }

        .row { display: flex; gap: 10px; }
        .col { flex: 1; }
        .submit-btn { width: 100%; padding: 18px; background: var(--primary); color: white; border: none; border-radius: 14px; font-size: 1.1rem; font-weight: bold; margin-top: 10px; cursor: pointer; }
        .loading-text { font-size: 0.8rem; color: #94a3b8; font-style: italic; }

        
        /* ğŸ’¡ ì¶”ê°€ëœ ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼ */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; background: white; display: flex; border-top: 1px solid #e2e8f0; z-index: 1000; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.8rem; color: #64748b; cursor: pointer; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        
        /* ğŸ’¡ ìŠ¤í”Œë˜ì‹œ í™”ë©´ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        #splash-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: #E60012; /* ë°°ê²½ì„ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999; /* ëª¨ë“  ìš”ì†Œë³´ë‹¤ ìœ„ì— í‘œì‹œ */
            transition: opacity 0.5s ease-out;
        }
        .splash-content { text-align: center; }
        .splash-content img { width: 150px; display: block; margin-bottom: 20px; }
        
        /* ë¡œë”© íœ  ì• ë‹ˆë©”ì´ì…˜ */
        .loader {
            width: 30px; height: 30px;
            border: 3px solid #333;
            border-top: 3px solid #ef4444; /* íƒ€ì´íƒ„ í¬ì¸íŠ¸ ì»¬ëŸ¬ */
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }


        /* ğŸ’¡ 2ì£¼ì¹˜ íƒ€ì„ë¼ì¸ ì»¨í…Œì´ë„ˆ */
.timeline-grid {
    display: flex;
    overflow-x: auto;
    gap: 10px;
    padding: 15px 5px;
    background: #fff;
    border-radius: 12px;
    margin-bottom: 20px;
    scrollbar-width: none;
}

/* ğŸ’¡ ê°œë³„ ë‚ ì§œ ê¸°ë‘¥ */
.time-col {
    min-width: 80px;
    background: #f1f5f9;
    border-radius: 8px;
    padding: 8px 4px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    align-items: center;
}

/* ğŸ’¡ í™”ë©´ ì „ì²´ì— ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ì ìš© */
html { scroll-behavior: smooth; }

/* ğŸ’¡ íƒ€ì„ë¼ì¸ ë§‰ëŒ€ ê¸€ììƒ‰ ë° ì‹œì¸ì„± ë³´ê°• */
.job-bar {
    width: 90%;
    font-size: 0.85rem;
    padding: 8px 4px;
    margin: 3px 0;
    border-radius: 6px;
    color: white !important; /* ë¬´ì¡°ê±´ í°ìƒ‰ */
    text-align: center;
    font-weight: 900;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5); /* ê¸€ì í…Œë‘ë¦¬ íš¨ê³¼ */
    cursor: pointer;
}

.bar-day { background: #2563eb; }    /* ì£¼ê°„: íŒŒë‘ */
.bar-night { background: #1e293b; }  /* ì•¼ê°„: ê²€ì • */

/* ğŸ’¡ ì¹´ë“œ ì í”„ ì‹œ í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼ */
.schedule-card-item {
    transition: all 0.4s ease;
}
        
.past-btn {
    width: 100%;
    padding: 10px;
    background: #f1f5f9;
    border: 1px dashed #cbd5e1;
    border-radius: 10px;
    margin-bottom: 15px;
    color: #64748b;
    font-size: 0.9rem;
}
        /* ì¸ì› í‘œì‹œ ì¹© ìŠ¤íƒ€ì¼ */
.worker-chip {
    display: inline-block;
    padding: 2px 8px;
    background: #e2e8f0;
    border-radius: 12px;
    font-size: 0.75rem;
    margin-right: 4px;
    color: #475569;
    font-weight: 600;
}

        
    </style>
</head>
<body>
    <div id="splash-screen">
        <div class="splash-content">
            <img src="https://github.com/westzero0/titan-work/blob/main/192.png?raw=true" alt="TITAN">
            <div class="loader"></div>
        </div>
    </div>

    <nav class="bottom-nav">
        <div onclick="showPage('log-page')" id="tab-log" class="nav-item active">ğŸ“ ì¼ë³´ì‘ì„±</div>
        <div onclick="showPage('schedule-page')" id="tab-sched" class="nav-item">ğŸ“… ì¼ì •í™•ì¸</div>
    </nav>

    <div class="container">
        <div id="log-page" class="page">
            <h2 style="color: var(--primary); text-align: center;">âš¡ íƒ€ì´íƒ„ ì‘ì—…ì¼ë³´</h2>
            <input type="hidden" id="submitter">

            <div class="card">
                <label>ğŸ“… ì‘ì—… ì¼ì</label>
                <input type="date" id="date">
                <label>ğŸ¢ ê±°ë˜ì²˜</label>
                <div id="client-chips" class="chip-container"><span class="loading-text">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span></div>
                
                <div class="site-header" style="margin-top:15px;">
                    <label style="margin-bottom:0;">ğŸ—ï¸ í˜„ì¥ëª…</label>
                    <label class="checkbox-group">
                        <input type="checkbox" id="showFinished" onchange="renderSiteChips()"> ì™„ë£Œí˜„ì¥ í¬í•¨
                    </label>
                </div>
                <input type="text" id="siteSearch" list="site-options" placeholder="í˜„ì¥ ê²€ìƒ‰ ë˜ëŠ” ì§ì ‘ ì…ë ¥" oninput="syncSiteSelection()">
                <datalist id="site-options"></datalist>
                <div id="site-chips" class="chip-container"></div>
            </div>

            <div class="card">
                <label>ğŸ› ï¸ ì‘ì—… ë‚´ìš©</label>
                <textarea id="work" rows="3" placeholder="ì˜¤ëŠ˜ ì‘ì—… ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                <div class="row">
                    <div class="col"><label>â° ì‹œì‘</label><select id="start"></select></div>
                    <div class="col"><label>â° ì¢…ë£Œ</label><select id="end"></select></div>
                </div>
                <label>ğŸ± ì„ì‹ ì—¬ë¶€</label>
                <select id="dinner"><option value="X">ì•ˆë¨¹ìŒ (X)</option><option value="O">ë¨¹ìŒ (O)</option></select>
            </div>

            <div class="card">
                <div class="chip-header">
                    <label style="margin-bottom:0;">ğŸ‘¥ ì‘ì—… ì¸ì›</label>
                    <span onclick="toggleDelMode('member')" id="del-btn-member" class="del-mode-btn">ğŸ—‘ï¸ ì‚­ì œ</span>
                </div>
                <div class="chip-input-group">
                    <input type="text" id="add-member-input" placeholder="ì´ë¦„ ì¶”ê°€">
                    <button onclick="addItem('member')" class="add-btn">ì¶”ê°€</button>
                </div>
                <div id="member-chips" class="chip-container"></div>
            </div>

            <div class="card">
                <div class="chip-header">
                    <label style="margin-bottom:0;">ğŸš— ì‚¬ìš© ì°¨ëŸ‰</label>
                    <span onclick="toggleDelMode('car')" id="del-btn-car" class="del-mode-btn">ğŸ—‘ï¸ ì‚­ì œ</span>
                </div>
                <div class="chip-input-group">
                    <input type="text" id="add-car-input" placeholder="ì°¨ëŸ‰ ì¶”ê°€">
                    <button onclick="addItem('car')" class="add-btn">ì¶”ê°€</button>
                </div>
                <div id="car-chips" class="chip-container"></div>
            </div>

            <div class="card">
                <div class="chip-header">
                    <label style="margin-bottom:0;">ğŸ“¦ ì‚¬ìš© ìì¬ (ì¹© ì„ íƒ)</label>
                    <span onclick="toggleDelMode('material')" id="del-btn-material" class="del-mode-btn">ğŸ—‘ï¸ ì‚­ì œ</span>
                </div>
                <div class="chip-input-group">
                    <input type="text" id="add-material-input" placeholder="ìì¬ ì´ë¦„ ì¶”ê°€">
                    <button onclick="addItem('material')" class="add-btn">ì¶”ê°€</button>
                </div>
                <div id="material-chips" class="chip-container"></div>
                <textarea id="materialExtra" rows="2" style="margin-top:10px;" placeholder="í•œë²ˆì— ì…ë ¥í•˜ë ¤ë©´ ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”."></textarea>
            </div>

            <div class="card">
                <label>ğŸ’° ê²½ë¹„ ê¸ˆì•¡</label>
                <input type="number" id="expAmount" placeholder="0">
                <div class="chip-header">
                    <label style="margin-bottom:0;">ğŸ’³ ê²½ë¹„ ê²°ì œì</label>
                    <span onclick="toggleDelMode('payer')" id="del-btn-payer" class="del-mode-btn">ğŸ—‘ï¸ ì‚­ì œ</span>
                </div>
                <div class="chip-input-group">
                    <input type="text" id="add-payer-input" placeholder="ì´ë¦„ ì¶”ê°€">
                    <button onclick="addItem('payer')" class="add-btn">ì¶”ê°€</button>
                </div>
                <div id="payer-chips" class="chip-container"></div>
                <label style="margin-top:10px;">ğŸ“ ê²½ë¹„ ë‚´ìš©</label>
                <input type="text" id="expDetail" placeholder="ìƒì„¸ ë‚´ìš©">
                <label>ğŸ“¸ ì˜ìˆ˜ì¦ ì²¨ë¶€</label>
                <input type="file" id="receipt" multiple accept="image/*">
            </div>

            <button id="sBtn" class="submit-btn" onclick="send()">ğŸš€ ì €ì¥ ë° ì¹´í†¡ ê³µìœ </button>
        </div>

<div id="schedule-page" class="page" style="display:none; padding-top: 10px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 0 5px;">
        <h2 style="color: var(--primary); margin: 0; font-size: 1.2rem; letter-spacing: -1px;">ğŸ“… í˜„ì¥ ì¼ì •</h2>
        
        <div style="display: flex; align-items: center; gap: 8px;">
            <select id="worker-select" onchange="renderView()" style="width: auto; margin: 0; padding: 6px 12px; font-size: 0.85rem; border-radius: 10px; border: 1px solid #cbd5e1; background: white; font-weight: 600;">
                <option value="ì „ì²´">ğŸ‘¤ ì „ì²´</option>
            </select>
            
            <div id="view-toggle" onclick="toggleView()" style="cursor:pointer; font-size:1.4rem; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border: 1px solid #e2e8f0;">ğŸ“…</div>
        </div>
    </div>
    
    <div id="timeline-grid" class="timeline-grid" style="margin-bottom: 15px;"></div>

    <div id="schedule-container"></div>
</div>


        
    </div>
    
    <script src="script.js"></script>
    <script>
    // ğŸ’¡ í™”ë©´ ì „í™˜ ìŠ¤ìœ„ì¹˜ ë¡œì§ ìˆ˜ì •
function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    document.getElementById(pageId).style.display = 'block';
    document.querySelectorAll('.nav-item').forEach(t => t.classList.remove('active'));
    
    if(pageId === 'log-page') {
        document.getElementById('tab-log').classList.add('active');
    } else {
        document.getElementById('tab-sched').classList.add('active');
        
        // ğŸš€ ì¼ì • í˜ì´ì§€ë¡œ ê°ˆ ë•Œ, ë°ì´í„°ê°€ ì´ë¯¸ ìˆë‹¤ë©´ ë°”ë¡œ í™”ë©´ì„ ê·¸ë¦¬ê³ 
        // ë°ì´í„°ê°€ ì—†ë‹¤ë©´ ì„œë²„ì—ì„œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
        if(typeof allSchedules !== 'undefined' && allSchedules.length > 0) {
            renderSchedulePage(); 
        } else if(typeof loadSchedules === 'function') {
            loadSchedules();
        }
    }
}
    </script>
</body>
</html>
